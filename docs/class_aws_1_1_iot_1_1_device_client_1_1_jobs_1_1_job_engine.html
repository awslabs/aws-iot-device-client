<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Device Client: Aws::Iot::DeviceClient::Jobs::JobEngine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Device Client
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Aws</b></li><li class="navelem"><b>Iot</b></li><li class="navelem"><b>DeviceClient</b></li><li class="navelem"><b>Jobs</b></li><li class="navelem"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html">JobEngine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Aws::Iot::DeviceClient::Jobs::JobEngine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Manages the execution of a Job.  
 <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_job_engine_8h_source.html">JobEngine.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aab65000d16ffe1c250c9af0c51d9abe6"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#aab65000d16ffe1c250c9af0c51d9abe6">processCmdOutput</a> (int fd, bool isStdErr, int childPID)</td></tr>
<tr class="memdesc:aab65000d16ffe1c250c9af0c51d9abe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by output processing threads to assess output from the child process.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#aab65000d16ffe1c250c9af0c51d9abe6">More...</a><br /></td></tr>
<tr class="separator:aab65000d16ffe1c250c9af0c51d9abe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a222840e0c95d064a26cbf53bdce7912a"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a222840e0c95d064a26cbf53bdce7912a">exec_steps</a> (<a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document.html">PlainJobDocument</a> jobDocument, const std::string &amp;jobHandlerDir)</td></tr>
<tr class="memdesc:a222840e0c95d064a26cbf53bdce7912a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the given set of steps (actions) in sequence as provided in the job document.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a222840e0c95d064a26cbf53bdce7912a">More...</a><br /></td></tr>
<tr class="separator:a222840e0c95d064a26cbf53bdce7912a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a067886d0e6ff32f6346976dd38e6feb3"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a067886d0e6ff32f6346976dd38e6feb3">hasErrors</a> ()</td></tr>
<tr class="memdesc:a067886d0e6ff32f6346976dd38e6feb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin the execution of a command with the specified arguments.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a067886d0e6ff32f6346976dd38e6feb3">More...</a><br /></td></tr>
<tr class="separator:a067886d0e6ff32f6346976dd38e6feb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86b7cc27d1d02aa6a9544cd5bbf26b4b"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a86b7cc27d1d02aa6a9544cd5bbf26b4b">getReason</a> (int statusCode)</td></tr>
<tr class="memdesc:a86b7cc27d1d02aa6a9544cd5bbf26b4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluates the return code of the <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html" title="Manages the execution of a Job.">JobEngine</a>'s command execution.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a86b7cc27d1d02aa6a9544cd5bbf26b4b">More...</a><br /></td></tr>
<tr class="separator:a86b7cc27d1d02aa6a9544cd5bbf26b4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab351da101769c122d338d1fd6f5bc142"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#ab351da101769c122d338d1fd6f5bc142">getStdOut</a> ()</td></tr>
<tr class="memdesc:ab351da101769c122d338d1fd6f5bc142"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take the STDOUT received from the child process.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#ab351da101769c122d338d1fd6f5bc142">More...</a><br /></td></tr>
<tr class="separator:ab351da101769c122d338d1fd6f5bc142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad9039c9a566e6636399a9b489773310"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#aad9039c9a566e6636399a9b489773310">getStdErr</a> ()</td></tr>
<tr class="memdesc:aad9039c9a566e6636399a9b489773310"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take the STDERR received from the child process.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#aad9039c9a566e6636399a9b489773310">More...</a><br /></td></tr>
<tr class="separator:aad9039c9a566e6636399a9b489773310"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9bdb21083f4dbb1c6aadb927889229df"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a9bdb21083f4dbb1c6aadb927889229df">buildCommand</a> (Crt::Optional&lt; std::string &gt; path, const std::string &amp;handler, const std::string &amp;jobHandlerDir) const</td></tr>
<tr class="memdesc:a9bdb21083f4dbb1c6aadb927889229df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds the command that will be executed.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a9bdb21083f4dbb1c6aadb927889229df">More...</a><br /></td></tr>
<tr class="separator:a9bdb21083f4dbb1c6aadb927889229df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d31d8595f88d68d2b13534dab8cc36c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a4d31d8595f88d68d2b13534dab8cc36c">exec_cmd</a> (std::unique_ptr&lt; const char *[]&gt; &amp;argv)</td></tr>
<tr class="memdesc:a4d31d8595f88d68d2b13534dab8cc36c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the argv, consists of command and arguments, using execvp(). This function also opens two pipes to process outputs from child processes.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a4d31d8595f88d68d2b13534dab8cc36c">More...</a><br /></td></tr>
<tr class="separator:a4d31d8595f88d68d2b13534dab8cc36c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0008fb0c57da536eee6a728924851b6c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a0008fb0c57da536eee6a728924851b6c">exec_process</a> (std::unique_ptr&lt; const char *[]&gt; &amp;argv)</td></tr>
<tr class="memdesc:a0008fb0c57da536eee6a728924851b6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the argv, consists of command and arguments, using execvp() This function only returns the exit code of child processes.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a0008fb0c57da536eee6a728924851b6c">More...</a><br /></td></tr>
<tr class="separator:a0008fb0c57da536eee6a728924851b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e74d1e1a55c28103cef60ec75d9b68"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a33e74d1e1a55c28103cef60ec75d9b68">verifySudoAndUser</a> (<a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document_1_1_job_action.html">PlainJobDocument::JobAction</a> action)</td></tr>
<tr class="memdesc:a33e74d1e1a55c28103cef60ec75d9b68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies if "sudo" and "$user" exists.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a33e74d1e1a55c28103cef60ec75d9b68">More...</a><br /></td></tr>
<tr class="separator:a33e74d1e1a55c28103cef60ec75d9b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0ca872310b23cac1332c3ff64ac90d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#aef0ca872310b23cac1332c3ff64ac90d">exec_handlerScript</a> (const std::string &amp;command, <a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document_1_1_job_action.html">PlainJobDocument::JobAction</a> action)</td></tr>
<tr class="memdesc:aef0ca872310b23cac1332c3ff64ac90d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds argv for "runHandler" type of jobs and makes calls to <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a4d31d8595f88d68d2b13534dab8cc36c" title="Executes the argv, consists of command and arguments, using execvp(). This function also opens two pi...">exec_cmd()</a> to execute.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#aef0ca872310b23cac1332c3ff64ac90d">More...</a><br /></td></tr>
<tr class="separator:aef0ca872310b23cac1332c3ff64ac90d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a378192309bccf3a2191f22b7dcbba3fa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a378192309bccf3a2191f22b7dcbba3fa">exec_shellCommand</a> (<a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document_1_1_job_action.html">PlainJobDocument::JobAction</a> action)</td></tr>
<tr class="memdesc:a378192309bccf3a2191f22b7dcbba3fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds argv for "runCommand" type of jobs and makes calls to <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a4d31d8595f88d68d2b13534dab8cc36c" title="Executes the argv, consists of command and arguments, using execvp(). This function also opens two pi...">exec_cmd()</a> to execute.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a378192309bccf3a2191f22b7dcbba3fa">More...</a><br /></td></tr>
<tr class="separator:a378192309bccf3a2191f22b7dcbba3fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f3bf994327724e95560b805eeaac42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#af9f3bf994327724e95560b805eeaac42">exec_action</a> (<a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document_1_1_job_action.html">PlainJobDocument::JobAction</a> action, const std::string &amp;jobHandlerDir, int &amp;executionStatus)</td></tr>
<tr class="memdesc:af9f3bf994327724e95560b805eeaac42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the given set of steps (actions) in sequence as provided in the job document.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#af9f3bf994327724e95560b805eeaac42">More...</a><br /></td></tr>
<tr class="separator:af9f3bf994327724e95560b805eeaac42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3e391a699bb7c903498eead712a20288"><td class="memItemLeft" align="right" valign="top"><a id="a3e391a699bb7c903498eead712a20288"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>TAG</b> = &quot;JobEngine.cpp&quot;</td></tr>
<tr class="separator:a3e391a699bb7c903498eead712a20288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d347fe9943bae385ae404800de77e4d"><td class="memItemLeft" align="right" valign="top"><a id="a5d347fe9943bae385ae404800de77e4d"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a5d347fe9943bae385ae404800de77e4d">DEFAULT_PATH_KEYWORD</a> = &quot;default&quot;</td></tr>
<tr class="memdesc:a5d347fe9943bae385ae404800de77e4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A keyword that can be specified as the "path" in a job doc to tell the Jobs feature to use the configured handler directory when looking for an executable matching the specified operation. <br /></td></tr>
<tr class="separator:a5d347fe9943bae385ae404800de77e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b32126097ebbd6c3fd1c0342a124b74"><td class="memItemLeft" align="right" valign="top"><a id="a1b32126097ebbd6c3fd1c0342a124b74"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>RUN_HANDLER_TYPE</b> = &quot;runHandler&quot;</td></tr>
<tr class="separator:a1b32126097ebbd6c3fd1c0342a124b74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed0bdc25f20f5da7d0f729e8550eb9b"><td class="memItemLeft" align="right" valign="top"><a id="a6ed0bdc25f20f5da7d0f729e8550eb9b"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>RUN_COMMAND_TYPE</b> = &quot;runCommand&quot;</td></tr>
<tr class="separator:a6ed0bdc25f20f5da7d0f729e8550eb9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cac8361d8365feb7b0e5807abc07e33"><td class="memItemLeft" align="right" valign="top">std::atomic_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a1cac8361d8365feb7b0e5807abc07e33">errors</a> {0}</td></tr>
<tr class="memdesc:a1cac8361d8365feb7b0e5807abc07e33"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of lines received on STDERR from the child process.  <a href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a1cac8361d8365feb7b0e5807abc07e33">More...</a><br /></td></tr>
<tr class="separator:a1cac8361d8365feb7b0e5807abc07e33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac90bc5fc6289d89cb012f0d6322b520c"><td class="memItemLeft" align="right" valign="top"><a id="ac90bc5fc6289d89cb012f0d6322b520c"></a>
<a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_limited_stream_buffer.html">Aws::Iot::DeviceClient::Jobs::LimitedStreamBuffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#ac90bc5fc6289d89cb012f0d6322b520c">stdoutstream</a></td></tr>
<tr class="memdesc:ac90bc5fc6289d89cb012f0d6322b520c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partial output from STDOUT of the child process to be used in UpdateJobExecution. <br /></td></tr>
<tr class="separator:ac90bc5fc6289d89cb012f0d6322b520c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefc97336f6335fb64a11ee690c22d834"><td class="memItemLeft" align="right" valign="top"><a id="aefc97336f6335fb64a11ee690c22d834"></a>
<a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_limited_stream_buffer.html">Aws::Iot::DeviceClient::Jobs::LimitedStreamBuffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#aefc97336f6335fb64a11ee690c22d834">stderrstream</a></td></tr>
<tr class="memdesc:aefc97336f6335fb64a11ee690c22d834"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partial output from STDERR of the child process to be used in UpdateJobExecution. <br /></td></tr>
<tr class="separator:aefc97336f6335fb64a11ee690c22d834"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a333eb4a7c9d0ec7143e2b954ee5a1be3"><td class="memItemLeft" align="right" valign="top"><a id="a333eb4a7c9d0ec7143e2b954ee5a1be3"></a>
static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a333eb4a7c9d0ec7143e2b954ee5a1be3">MAX_LOG_LINES</a> = 1000</td></tr>
<tr class="memdesc:a333eb4a7c9d0ec7143e2b954ee5a1be3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of lines that we'll read from STDOUT or STDERR of the child process before stopping. This prevents against log corruption in the event that the specified job generates a large volume of output. <br /></td></tr>
<tr class="separator:a333eb4a7c9d0ec7143e2b954ee5a1be3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages the execution of a Job. </p>
<p>The <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html" title="Manages the execution of a Job.">JobEngine</a> is fully responsible for executing a given command and its arguments, which may point to handlers provided as part of the Device Client or to other executables available to the device. The <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html" title="Manages the execution of a Job.">JobEngine</a> manages all of the setup required to redirect output from the child process so that it can be analyzed by the Jobs feature and used to determine job success. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a9bdb21083f4dbb1c6aadb927889229df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bdb21083f4dbb1c6aadb927889229df">&#9670;&nbsp;</a></span>buildCommand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string JobEngine::buildCommand </td>
          <td>(</td>
          <td class="paramtype">Crt::Optional&lt; std::string &gt;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>jobHandlerDir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds the command that will be executed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>the provided path to the executable </td></tr>
    <tr><td class="paramname">handler</td><td>the name of the handler script or executable file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the full executable path.</dd></dl>
<p>If this command is unable to find a given job handler and/or the permissions for the given job handler are inappropriate, this function will thrown an exception. </p>

</div>
</div>
<a id="af9f3bf994327724e95560b805eeaac42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9f3bf994327724e95560b805eeaac42">&#9670;&nbsp;</a></span>exec_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void JobEngine::exec_action </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document_1_1_job_action.html">PlainJobDocument::JobAction</a>&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>jobHandlerDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>executionStatus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes the given set of steps (actions) in sequence as provided in the job document. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">action</td><td>the action provided in job document to execute </td></tr>
    <tr><td class="paramname">jobHandlerDir</td><td>the default job handler directory path </td></tr>
    <tr><td class="paramname">executionStatus</td><td>job execution status </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an integer representing the return code of the executed action </dd></dl>

</div>
</div>
<a id="a4d31d8595f88d68d2b13534dab8cc36c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d31d8595f88d68d2b13534dab8cc36c">&#9670;&nbsp;</a></span>exec_cmd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int JobEngine::exec_cmd </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; const char *[]&gt; &amp;&#160;</td>
          <td class="paramname"><em>argv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes the argv, consists of command and arguments, using execvp(). This function also opens two pipes to process outputs from child processes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argv</td><td>the arguments to pass to execvp() to execute </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an integer representing the return code of the executed process </dd></dl>

</div>
</div>
<a id="aef0ca872310b23cac1332c3ff64ac90d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef0ca872310b23cac1332c3ff64ac90d">&#9670;&nbsp;</a></span>exec_handlerScript()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int JobEngine::exec_handlerScript </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document_1_1_job_action.html">PlainJobDocument::JobAction</a>&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds argv for "runHandler" type of jobs and makes calls to <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a4d31d8595f88d68d2b13534dab8cc36c" title="Executes the argv, consists of command and arguments, using execvp(). This function also opens two pi...">exec_cmd()</a> to execute. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>the command built from handler and path and used by execvp() to execute </td></tr>
    <tr><td class="paramname">action</td><td>the action provided in job document to execute </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an integer representing the return code of the executed process </dd></dl>
<p>Create char array argv[] storing arguments to pass to execvp() function. argv[0] executable path argv[1] Linux user name argv[2:] arguments required for executing the executable file..</p>

</div>
</div>
<a id="a0008fb0c57da536eee6a728924851b6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0008fb0c57da536eee6a728924851b6c">&#9670;&nbsp;</a></span>exec_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int JobEngine::exec_process </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; const char *[]&gt; &amp;&#160;</td>
          <td class="paramname"><em>argv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes the argv, consists of command and arguments, using execvp() This function only returns the exit code of child processes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argv</td><td>the arguments to pass to execvp() to execute </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an integer representing the return code of the executed process </dd></dl>

</div>
</div>
<a id="a378192309bccf3a2191f22b7dcbba3fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a378192309bccf3a2191f22b7dcbba3fa">&#9670;&nbsp;</a></span>exec_shellCommand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int JobEngine::exec_shellCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document_1_1_job_action.html">PlainJobDocument::JobAction</a>&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds argv for "runCommand" type of jobs and makes calls to <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html#a4d31d8595f88d68d2b13534dab8cc36c" title="Executes the argv, consists of command and arguments, using execvp(). This function also opens two pi...">exec_cmd()</a> to execute. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">action</td><td>the action provided in job document to execute </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an boolean indicating verification succeeds or fails </dd></dl>

</div>
</div>
<a id="a222840e0c95d064a26cbf53bdce7912a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a222840e0c95d064a26cbf53bdce7912a">&#9670;&nbsp;</a></span>exec_steps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int JobEngine::exec_steps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document.html">PlainJobDocument</a>&#160;</td>
          <td class="paramname"><em>jobDocument</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>jobHandlerDir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes the given set of steps (actions) in sequence as provided in the job document. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jobDocument</td><td>the job document to execute </td></tr>
    <tr><td class="paramname">jobHandlerDir</td><td>the default job handler directory path </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an integer representing the return code of the executed action </dd></dl>

</div>
</div>
<a id="a86b7cc27d1d02aa6a9544cd5bbf26b4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86b7cc27d1d02aa6a9544cd5bbf26b4b">&#9670;&nbsp;</a></span>getReason()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string JobEngine::getReason </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>statusCode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluates the return code of the <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html" title="Manages the execution of a Job.">JobEngine</a>'s command execution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">statusCode</td><td>the status code returned by the job execution </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the output of the status code evaluation </dd></dl>

</div>
</div>
<a id="aad9039c9a566e6636399a9b489773310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad9039c9a566e6636399a9b489773310">&#9670;&nbsp;</a></span>getStdErr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string Aws::Iot::DeviceClient::Jobs::JobEngine::getStdErr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Take the STDERR received from the child process. </p>
<dl class="section return"><dt>Returns</dt><dd>a <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_limited_stream_buffer.html" title="Used to buffer output from STDOUT or STDERR of the child process for placement in the status details ...">LimitedStreamBuffer</a> taken from the <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html" title="Manages the execution of a Job.">JobEngine</a> </dd></dl>

</div>
</div>
<a id="ab351da101769c122d338d1fd6f5bc142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab351da101769c122d338d1fd6f5bc142">&#9670;&nbsp;</a></span>getStdOut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string Aws::Iot::DeviceClient::Jobs::JobEngine::getStdOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Take the STDOUT received from the child process. </p>
<dl class="section return"><dt>Returns</dt><dd>a <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_limited_stream_buffer.html" title="Used to buffer output from STDOUT or STDERR of the child process for placement in the status details ...">LimitedStreamBuffer</a> taken from the <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html" title="Manages the execution of a Job.">JobEngine</a> </dd></dl>

</div>
</div>
<a id="a067886d0e6ff32f6346976dd38e6feb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a067886d0e6ff32f6346976dd38e6feb3">&#9670;&nbsp;</a></span>hasErrors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int Aws::Iot::DeviceClient::Jobs::JobEngine::hasErrors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Begin the execution of a command with the specified arguments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">operation</td><td>the operation to perform, likely the path to an executable </td></tr>
    <tr><td class="paramname">args</td><td>the arguments to pass to the executable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the return code of the child process, or an error code if it cannot be executed</dd></dl>
<p>Whether the <a class="el" href="class_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_job_engine.html" title="Manages the execution of a Job.">JobEngine</a> is reporting errors received from the child process</p>
<dl class="section return"><dt>Returns</dt><dd>an integer representing the number of lines received on STDERR </dd></dl>

</div>
</div>
<a id="aab65000d16ffe1c250c9af0c51d9abe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab65000d16ffe1c250c9af0c51d9abe6">&#9670;&nbsp;</a></span>processCmdOutput()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void JobEngine::processCmdOutput </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isStdErr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>childPID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used by output processing threads to assess output from the child process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>the file descriptor of the output to process </td></tr>
    <tr><td class="paramname">isStdErr</td><td>whether the output being processed is from STDERR </td></tr>
    <tr><td class="paramname">childPID</td><td>the process ID of the child process </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a33e74d1e1a55c28103cef60ec75d9b68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e74d1e1a55c28103cef60ec75d9b68">&#9670;&nbsp;</a></span>verifySudoAndUser()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool JobEngine::verifySudoAndUser </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_aws_1_1_iot_1_1_device_client_1_1_jobs_1_1_plain_job_document_1_1_job_action.html">PlainJobDocument::JobAction</a>&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Verifies if "sudo" and "$user" exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">action</td><td>the action provided in job document to execute </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an boolean indicating verification succeeds or fails </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a1cac8361d8365feb7b0e5807abc07e33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cac8361d8365feb7b0e5807abc07e33">&#9670;&nbsp;</a></span>errors</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic_int Aws::Iot::DeviceClient::Jobs::JobEngine::errors {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of lines received on STDERR from the child process. </p>
<p>Used to determine whether the job was successful or not, since a script with multiple commands will return the return code of the final command and may not be indicative of whether all actions were successful. The incoming job document may include a property that specifies an acceptable number of STDERR lines to allow in case some errors are expected. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/aws-iot-device-client/aws-iot-device-client/source/jobs/<a class="el" href="_job_engine_8h_source.html">JobEngine.h</a></li>
<li>/home/runner/work/aws-iot-device-client/aws-iot-device-client/source/jobs/JobEngine.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
